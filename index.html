<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Performance Based CBT — Student</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app" id="appRoot">
    <header>
      <h1>Learners Achievement Test — Student</h1>
      <p>Binary • Ratios • Ratio Word Problems • Prime Factors • LCM/HCF • Fractions • Factorization • Arithmetic Mean • Square Roots</p>
    </header>

    <div class="layout">
      <!-- Controls (hidden automatically in results mode) -->
      <section class="panel" id="controlsPanel" aria-label="Student controls">
        <label for="candidateName">Candidate Full Name (2–3 words)</label>
        <div class="row" style="justify-content:center">
          <input id="candidateName" type="text" placeholder="e.g. Amina Yusuf Ade" autocomplete="off" maxlength="60">
          <button class="btn" id="startBtn" title="Begin your test">Start Test</button>
          <button class="btn ghost" id="checkResultBtn" title="View your submitted result (if any)">Check Result</button>
        </div>
        <p class="small" style="margin-top:6px; text-align:center">
          You can check your result any time after submission. Each student may take the test once unless unlocked by the teacher (Admin page).
        </p>

        <div style="margin-top:10px" class="row" role="status" aria-live="polite">
          <div style="flex:1">
            <div class="row" style="align-items:center; gap:10px; justify-content:center">
              <div class="tag">Progress</div>
              <div class="small" id="progressCount">0 / 50 answered</div>
              <div class="small">•</div>
              <div class="small" id="markedCount">0 marked</div>
            </div>
            <div class="progressBar" style="margin-top:6px"><div id="progressFill" class="progressFill"></div></div>
          </div>
        </div>

        <div style="margin-top:10px">
          <div class="row" style="align-items:center; justify-content:space-between">
            <div class="tag">Navigation</div>
            <div class="small">Tap to jump</div>
          </div>
          <div class="navWrap" id="navWrap">
            <div id="jumpGrid" class="jumpGrid" role="navigation" aria-label="Jump to question"></div>
          </div>
        </div>
      </section>

      <!-- Test Area -->
      <section class="panel" id="testPanel" style="display:none">
        <div class="panelTimer">
          <div class="timerBox">
            ⏳ <span id="timer">02:30:00</span>
            <span class="qMeta">• Q <span id="qIndexTop">1</span> / <span id="qTotalTop">50</span></span>
          </div>
        </div>

        <div class="qNavRow" role="group" aria-label="Question navigation">
          <button class="navBtn" id="prevBtn" disabled>Previous</button>
          <button class="navBtn" id="nextBtn">Next</button>
          <button class="navBtn" id="markBtn">Mark</button>
        </div>

        <div id="submitContainer" class="qNavRow"></div>

        <div class="qhead">
          <div class="row small">
            <span id="qIndex" style="visibility:hidden;position:absolute">1</span>
            <span class="tag" id="topicTag">Binary</span>
            <span class="tag" id="difficultyTag">easy</span>
          </div>
        </div>

        <div class="questionCard" aria-live="polite">
          <div class="qtext" id="qText">Loading...</div>
          <div class="options" id="options"></div>
          <div class="small mono" id="timeOnQ">Time on question: 0s</div>
        </div>

        <div class="small" id="statusMsg" aria-live="polite"></div>
      </section>

      <!-- RESULTS — Desktop/Tablet (Vertical Tabs) -->
      <section class="panel resultsDesktop" id="resultDesktop" style="display:none">
        <div class="vtabs-wrap">
          <aside class="vtabs" role="tablist" aria-label="Results sections">
            <button class="vtab active" data-tab="overview" role="tab" aria-selected="true">Overview</button>
            <button class="vtab" data-tab="topics" role="tab" aria-selected="false">Topic Analytics</button>
            <button class="vtab" data-tab="review" role="tab" aria-selected="false">Per-question Review</button>
          </aside>

          <div class="vpanes">
            <!-- Overview -->
            <section id="tab-overview" class="vpane active" role="tabpanel" aria-labelledby="Overview">
              <div class="questionCard tight">
                <h2>Score Overview</h2>
                <p class="small mono" id="resMeta"></p>
                <div class="row metricsRow">
                  <div class="metric"><div class="metricLabel">Score</div><div class="metricValue" id="resScore">—</div></div>
                  <div class="metric"><div class="metricLabel">Percent</div><div class="metricValue" id="resPercent">—%</div></div>
                  <div class="metric"><div class="metricLabel">Time Used</div><div class="metricValue" id="resTime">—</div></div>
                </div>
              </div>
            </section>

            <!-- Topics -->
            <section id="tab-topics" class="vpane" role="tabpanel" aria-labelledby="Topic Analytics">
              <div class="questionCard tight">
                <h2>Topic Analytics</h2>
                <div class="tableWrap">
                  <table>
                    <thead><tr><th>Topic</th><th>Correct</th><th>Total</th><th>Accuracy</th><th>Time</th></tr></thead>
                    <tbody id="topicTbody"></tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- Review -->
            <section id="tab-review" class="vpane" role="tabpanel" aria-labelledby="Per-question Review">
              <div class="questionCard tight">
                <h2>Per-question Review</h2>
                <div class="tableWrap">
                  <table>
                    <thead><tr><th>#</th><th>Topic</th><th>Question</th><th>Your Ans</th><th>Correct</th><th>✓/✗</th><th>Time</th></tr></thead>
                    <tbody id="detailTbody"></tbody>
                  </table>
                </div>
                <p class="small" style="margin-top:10px">Need a PDF? Ask your teacher to download it from the Admin page.</p>
              </div>
            </section>
          </div>
        </div>
      </section>

      <!-- RESULTS — Mobile (Vertical Cards) -->
      <section class="panel" id="resultMobile" style="display:none">
        <div class="questionCard" style="background:linear-gradient(180deg,#f7fffb,#ffffff)">
          <h2 style="margin:6px 0 10px">Score Overview</h2>
          <p class="small mono" id="m_resMeta"></p>
          <div class="metricGrid" style="margin-top:8px">
            <div class="metric"><div class="metricLabel">Score</div><div class="metricValue" id="m_resScore">—</div></div>
            <div class="metric"><div class="metricLabel">Percent</div><div class="metricValue" id="m_resPercent">—%</div></div>
            <div class="metric"><div class="metricLabel">Time Used</div><div class="metricValue" id="m_resTime">—</div></div>
          </div>
        </div>

        <div class="questionCard">
          <h2 style="margin:0 0 8px">Topic Analytics</h2>
          <div id="topicCards" class="stack" style="display:grid; gap:8px"></div>
        </div>

        <div class="questionCard">
          <h2 style="margin:0 0 8px">Per-question Review</h2>
          <div id="reviewStack" class="stack" style="display:grid; gap:8px"></div>
          <p class="small" style="margin-top:8px">Need a PDF? Ask your teacher to download it from the Admin page.</p>
        </div>
      </section>
    </div>
  </div>

  <!-- ===== Embedded question bank ===== -->
  <script type="application/json" id="questionBank">
  [
    { "id":1,"topic":"Binary","difficulty":"easy","q":"Convert decimal 5 to binary.","options":["101","111","110","100"],"answer":"101","explanation":"5 in binary is 101." },
    { "id":2,"topic":"Binary","difficulty":"easy","q":"Convert decimal 9 to binary.","options":["1001","1010","1111","1100"],"answer":"1001","explanation":"9 in binary is 1001." },
    { "id":3,"topic":"Binary","difficulty":"easy","q":"Convert decimal 12 to binary.","options":["1100","1110","1010","1000"],"answer":"1100","explanation":"12 in binary is 1100." },
    { "id":4,"topic":"Ratios","difficulty":"easy","q":"Simplify the ratio 6:9.","options":["2:3","3:4","4:3","1:2"],"answer":"2:3","explanation":"Divide both by 3 → 2:3." },
    { "id":5,"topic":"Ratios","difficulty":"easy","q":"Simplify the ratio 8:12.","options":["2:3","1:2","3:2","4:3"],"answer":"2:3","explanation":"Divide both by 4 → 2:3." },
    { "id":6,"topic":"Ratio Word Problem","difficulty":"easy","q":"If 3 pens cost ₦150, how much do 5 pens cost?","options":["₦250","₦200","₦300","₦180"],"answer":"₦250","explanation":"Unit price ₦50; 5×50 = ₦250." },
    { "id":7,"topic":"Prime Factors","difficulty":"easy","q":"Prime factors of 18 (product form)?","options":["2×3×3","2×9","3×6","18"],"answer":"2×3×3","explanation":"18 = 2×3×3." },
    { "id":8,"topic":"LCM & HCF","difficulty":"easy","q":"Find the HCF of 8 and 12.","options":["4","6","2","8"],"answer":"4","explanation":"HCF(8,12)=4." },
    { "id":9,"topic":"Fractions","difficulty":"easy","q":"1/2 + 1/4 = ?","options":["3/4","1/4","2/3","1/2"],"answer":"3/4","explanation":"1/2 = 2/4; 2/4 + 1/4 = 3/4." },
    { "id":10,"topic":"Factorization","difficulty":"easy","q":"Factorise: 6x + 9.","options":["3(2x + 3)","6(x + 1.5)","9(0.666x + 1)","2(3x + 6)"],"answer":"3(2x + 3)","explanation":"GCF is 3." },
    { "id":11,"topic":"Arithmetic Mean","difficulty":"easy","q":"Find the mean of 4, 8, 12.","options":["8","6","9","7"],"answer":"8","explanation":"(4+8+12)/3 = 24/3 = 8." },
    { "id":12,"topic":"Square Roots","difficulty":"easy","q":"√25 = ?","options":["5","6","7","4"],"answer":"5","explanation":"25 is a perfect square: 5." },
    { "id":13,"topic":"Square Roots","difficulty":"easy","q":"√49 = ?","options":["7","6","8","9"],"answer":"7","explanation":"49 is a perfect square: 7." },
    { "id":14,"topic":"Binary","difficulty":"easy","q":"Convert decimal 10 to binary.","options":["1010","1110","1100","1001"],"answer":"1010","explanation":"10 in binary is 1010." },
    { "id":15,"topic":"Ratios","difficulty":"easy","q":"Simplify the ratio 9:12.","options":["3:4","2:3","4:3","1:2"],"answer":"3:4","explanation":"Divide both by 3." },
    { "id":16,"topic":"LCM & HCF","difficulty":"easy","q":"Find the LCM of 4 and 6.","options":["12","8","10","14"],"answer":"12","explanation":"LCM(4,6)=12." },
    { "id":17,"topic":"Fractions","difficulty":"easy","q":"2/3 − 1/6 = ?","options":["1/2","1/3","2/6","3/6"],"answer":"1/2","explanation":"2/3=4/6; 4/6−1/6=3/6=1/2." },
    { "id":18,"topic":"Prime Factors","difficulty":"easy","q":"Prime factors of 20 (product form)?","options":["2×2×5","4×5","10×2","2×10"],"answer":"2×2×5","explanation":"20=2×2×5." },
    { "id":19,"topic":"Arithmetic Mean","difficulty":"easy","q":"Mean of 3, 5, 7, 9.","options":["6","5","7","8"],"answer":"6","explanation":"Sum=24; 24/4=6." },
    { "id":20,"topic":"Square Roots","difficulty":"easy","q":"√81 = ?","options":["9","8","10","7"],"answer":"9","explanation":"81 is a perfect square." },

    { "id":21,"topic":"Binary","difficulty":"medium","q":"Convert binary 101101 to decimal.","options":["45","46","44","49"],"answer":"45","explanation":"32+8+4+1=45." },
    { "id":22,"topic":"Ratios","difficulty":"medium","q":"If the ratio of red to blue balls is 3:5 and total is 64, how many blue balls?","options":["40","24","32","20"],"answer":"40","explanation":"Blue=5/8 × 64=40." },
    { "id":23,"topic":"Ratio Word Problem","difficulty":"medium","q":"4 workers complete a job in 6 days. How long will 6 workers take (same rate)?","options":["4","5","3","6"],"answer":"4","explanation":"Time inversely proportional to workers: 4×6/6=4 days." },
    { "id":24,"topic":"Prime Factors","difficulty":"medium","q":"Prime factors of 84?","options":["2×2×3×7","2×2×2×7","3×3×7","2×3×5×7"],"answer":"2×2×3×7","explanation":"84=2×2×3×7." },
    { "id":25,"topic":"LCM & HCF","difficulty":"medium","q":"Find the LCM of 12 and 18.","options":["36","24","48","30"],"answer":"36","explanation":"LCM(12,18)=36." },
    { "id":26,"topic":"Fractions","difficulty":"medium","q":"Multiply: 3/5 × 10/9 = ?","options":["2/3","1/3","3/2","5/3"],"answer":"2/3","explanation":"(3×10)/(5×9)=30/45=2/3." },
    { "id":27,"topic":"Factorization","difficulty":"medium","q":"Factorise: 12xy + 18xy.","options":["6xy(2 + 3)","12xy(1 + 1.5)","3xy(4 + 6)","30xy"],"answer":"6xy(2 + 3)","explanation":"Common factor 6xy." },
    { "id":28,"topic":"Arithmetic Mean","difficulty":"medium","q":"Mean of 10, 14, 18, 22.","options":["16","15","17","18"],"answer":"16","explanation":"Sum=64; 64/4=16." },
    { "id":29,"topic":"Square Roots","difficulty":"medium","q":"Which is the nearest integer to √10000?","options":["100","99","101","90"],"answer":"100","explanation":"10000 is a perfect square: 100." },
    { "id":30,"topic":"Binary","difficulty":"medium","q":"Convert binary 111001 to decimal.","options":["57","58","49","61"],"answer":"57","explanation":"32+16+8+1=57." },
    { "id":31,"topic":"Ratios","difficulty":"medium","q":"Increase ₦1800 in ratio 2:3.","options":["₦2700","₦1200","₦900","₦1000"],"answer":"₦2700","explanation":"₦1800×3/2=₦900×3=₦2700." },
    { "id":32,"topic":"LCM & HCF","difficulty":"medium","q":"If HCF(28, 42) = ?","options":["14","7","6","21"],"answer":"14","explanation":"HCF is 14." },
    { "id":33,"topic":"Fractions","difficulty":"medium","q":"(5/12) ÷ (5/18) = ?","options":["3/2","2/3","5/6","6/5"],"answer":"3/2","explanation":"(5/12)×(18/5)=18/12=3/2." },
    { "id":34,"topic":"Factorization","difficulty":"medium","q":"Factorise: 9xy + 12xy.","options":["3xy(3 + 4)","9xy(1 + 1.333...)","6xy(1.5 + 2)","xy(9 + 12)"],"answer":"3xy(3 + 4)","explanation":"GCF=3xy." },
    { "id":35,"topic":"Arithmetic Mean","difficulty":"medium","q":"Mean of 7, 11, 15, 19, 23.","options":["15","16","14","13"],"answer":"15","explanation":"Sum=75; 75/5=15." },

    { "id":36,"topic":"Binary","difficulty":"hard","q":"Convert decimal 173 to binary.","options":["10101101","10101100","10100101","10011101"],"answer":"10101101","explanation":"128+32+8+4+1=173." },
    { "id":37,"topic":"Ratios","difficulty":"hard","q":"If x:y = 7:9 and x = 56, find y.","options":["72","63","64","70"],"answer":"72","explanation":"k=56/7=8 → y=9×8=72." },
    { "id":38,"topic":"Ratio Word Problem","difficulty":"hard","q":"If y is inversely proportional to x and y=12 when x=5, find y when x=15.","options":["4","3","5","6"],"answer":"4","explanation":"xy=k → 12×5=60; y=60/15=4." },
    { "id":39,"topic":"Prime Factors","difficulty":"hard","q":"Prime factors of 468 (product form)?","options":["2×2×3×3×13","2×3×3×13","2×2×2×3×13","2×2×7×7"],"answer":"2×2×3×3×13","explanation":"468=2×2×3×3×13." },
    { "id":40,"topic":"LCM & HCF","difficulty":"hard","q":"Find the HCF of 144 and 216.","options":["72","36","24","48"],"answer":"72","explanation":"HCF(144,216)=72." },
    { "id":41,"topic":"Fractions","difficulty":"hard","q":"Compute: (7/8) ÷ (21/32).","options":["4/3","3/4","7/21","32/168"],"answer":"4/3","explanation":"(7/8)×(32/21)=224/168=4/3." },
    { "id":42,"topic":"Factorization","difficulty":"hard","q":"Factorise: 42a + 66a.","options":["6a(7 + 11)","3a(14 + 22)","2a(21 + 33)","a(42 + 66)"],"answer":"6a(7 + 11)","explanation":"GCF is 6a." },
    { "id":43,"topic":"Arithmetic Mean","difficulty":"hard","q":"The mean of 14, 18, 22 and x is 20. Find x.","options":["26","24","22","28"],"answer":"26","explanation":"Mean×4=80; sum known=54; x=26." },
    { "id":44,"topic":"Square Roots","difficulty":"hard","q":"√256 = ?","options":["16","14","18","12"],"answer":"16","explanation":"256 is a perfect square: 16." },
    { "id":45,"topic":"Binary","difficulty":"hard","q":"Convert decimal 255 to binary.","options":["11111111","11111110","11101111","11011111"],"answer":"11111111","explanation":"255 is 8 ones in binary." },
    { "id":46,"topic":"Ratios","difficulty":"hard","q":"If 3x:2y = 9:14, find x:y.","options":["3:7","7:3","9:28","14:9"],"answer":"3:7","explanation":"3x/2y=9/14 → x/y=(9/14)×(2/3)=3/7." },
    { "id":47,"topic":"LCM & HCF","difficulty":"hard","q":"Find LCM of 24, 36, and 60.","options":["360","180","240","720"],"answer":"360","explanation":"LCM(24,36,60)=360." },
    { "id":48,"topic":"Fractions","difficulty":"hard","q":"Compute: (11/12) × (18/55).","options":["3/10","10/3","1/2","33/110"],"answer":"3/10","explanation":"Cancel: 11 with 55, 18 with 12 → 3/10." },
    { "id":49,"topic":"Arithmetic Mean","difficulty":"hard","q":"Mean of 6 numbers is 15. If five are 10,12,16,18,20, find the sixth.","options":["14","15","18","24"],"answer":"14","explanation":"Total=90; known sum=76; missing=14." },
    { "id":50,"topic":"Square Roots","difficulty":"hard","q":"√900 = ?","options":["30","45","25","20"],"answer":"30","explanation":"900 is 30²." }
  ]
  </script>

  <script src="main.js"></script>
</body>
</html>
